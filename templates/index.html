<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì˜¤ëŠ˜ì˜ í•«ë”œ Â· í• ì¸ ì •ë³´ ëª¨ìŒ | í¸ì˜ì  Â· ë§ˆíŠ¸ Â· ê°€ì „ ì„¸ì¼</title>
<meta name="description" content="ì˜¤ëŠ˜ì˜ í•«ë”œ, í¸ì˜ì  í–‰ì‚¬, ë§ˆíŠ¸ ì„¸ì¼, ê°€ì „Â·íŒ¨ì…˜ í• ì¸ ì •ë³´ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•˜ì„¸ìš”. ë§¤ì¼ ì—…ë°ì´íŠ¸!">
<meta name="keywords" content="í•«ë”œ, í• ì¸, íŠ¹ê°€, ì„¸ì¼, í¸ì˜ì  í–‰ì‚¬, ë§ˆíŠ¸ ì„¸ì¼, ê°€ì „ í• ì¸, íŒ¨ì…˜ ì„¸ì¼, ì‹í’ˆ íŠ¹ê°€">
<meta name="robots" content="index, follow">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  .zoom-container img { transition: transform 0.3s ease; }
  .zoom-container:hover img { transform: scale(1.2); }
  .price { color: red; font-weight: bold; font-size: 1.1rem; }
  #scrollTopBtn {
    position: fixed;
    bottom: 40px;
    right: 40px;
    display: none;
    z-index: 999;
  }
</style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container">
    <a class="navbar-brand" href="/">ğŸ”¥ ì˜¤ëŠ˜ì˜ í•«ë”œ</a>
    <form action="/search" method="get" class="d-flex ms-auto">
      <input type="text" name="q" class="form-control me-2" placeholder="ìƒí’ˆ ê²€ìƒ‰" required>
      <button class="btn btn-warning" type="submit">ê²€ìƒ‰</button>
    </form>
  </div>
</nav>
<div class="container py-4">
  <div class="mb-4 text-center">
    <a href="/" class="btn btn-outline-dark {% if not selected_category %}active{% endif %}">ì „ì²´</a>
    {% for cat in categories %}
    <a href="/?category={{ cat }}" class="btn btn-outline-dark {% if selected_category == cat %}active{% endif %}">{{ cat }}</a>
    {% endfor %}
  </div>
  <div class="mb-4 text-center">
    <h5>ğŸ”¥ ì‹¤ì‹œê°„ ì¸ê¸° ê²€ìƒ‰ì–´</h5>
    <div>
      {% for keyword in top_keywords %}
        <a href="/search?q={{ keyword }}" class="badge bg-secondary me-2">{{ loop.index }}ìœ„ - {{ keyword }}</a>
      {% endfor %}
    </div>
  </div>
  <div class="row" id="product-list">
    {% include "_product_cards.html" %}
  </div>
  <div id="loading" class="text-center my-4" style="display:none;">
    <div class="spinner-border"></div>
  </div>
</div>
<button id="scrollTopBtn" class="btn btn-primary">â¬† ë§¨ ìœ„ë¡œ</button>
<script>
let currentPage = 1;
let loading = false;
window.addEventListener('scroll', () => {
  if (loading) return;
  if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 200) {
    loading = true;
    document.getElementById('loading').style.display = 'block';
    currentPage++;
    let url = "{{ url_for('load_more') }}?page=" + currentPage;
    {% if search_query %}
      url = "/search?q={{ search_query }}&page=" + currentPage;
    {% endif %}
    fetch(url, { headers: { "X-Requested-With": "XMLHttpRequest" } })
      .then(res => res.text())
      .then(html => {
        document.getElementById('product-list').insertAdjacentHTML('beforeend', html);
        document.getElementById('loading').style.display = 'none';
        loading = false;
      });
  }
  const scrollTopBtn = document.getElementById("scrollTopBtn");
  if (document.documentElement.scrollTop > 200) {
    scrollTopBtn.style.display = "block";
  } else {
    scrollTopBtn.style.display = "none";
  }
});
document.getElementById("scrollTopBtn").addEventListener("click", () => {
  window.scrollTo({ top: 0, behavior: 'smooth' });
});
</script>
</body>
</html>
